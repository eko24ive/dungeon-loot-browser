(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{50:function(e,t,n){e.exports=n(72)},72:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),u=n(15),l=n.n(u),o=n(74),i=n(75),c=n(8),m=n(14),s=n(31);m.b.add(s.a);var g=n(9),d=n(12),f=n(32),v=function(){return{type:"RESET_APP"}},b=function(e,t){return{type:"SET_TIME_FILTER",key:e,value:t}},p=function(e){return{type:"SET_DUNGEONS_DUMP",dump:e}},E=function(e){return{type:"SET_DUNGEON",dungeon:e}},D=function(e){return{type:"SET_AVAILABLE_DUNGEONS",dungeons:e}},h={activeDungeon:null,timeFilter:Object(d.Map)({timeFrom:"00:00",timeTo:"24:00"}),dungeonsDump:null,availableDungeons:[]},O=Object.assign({},h),w=Object(f.combineReducers)({activeDungeon:function(e,t){switch(t.type){case"SET_DUNGEON":return t.dungeon;case"RESET_APP":return h.activeDungeon;default:return e}},timeFilter:function(e,t){var n=t.key,a=t.value;switch(t.type){case"SET_TIME_FILTER":return e.set(n,a);case"RESET_APP":return h.timeFilter;default:return e}},dungeonsDump:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DUNGEONS_DUMP":return t.dump;case"RESET_APP":return h.dungeonsDump;default:return e}},availableDungeons:function(e,t){switch(t.type){case"SET_AVAILABLE_DUNGEONS":return t.dungeons;case"RESET_APP":return h.availableDungeons;default:return e}}}),x=Object(g.a)(function(e){var t=e.getState;return function(e){return function(n){var a=e(n);switch(n.type){case"SET_TIME_FILTER":return localStorage.setItem("timeFilter",JSON.stringify(t().get("timeFilter").toJS())),a;case"SET_DUNGEONS_DUMP":return localStorage.setItem("dungeonsDump",JSON.stringify(t().get("dungeonsDump"))),a;case"SET_DUNGEON":return localStorage.setItem("activeDungeon",t().get("activeDungeon")),a;case"SET_AVAILABLE_DUNGEONS":return localStorage.setItem("availableDungeons",JSON.stringify(t().get("availableDungeons"))),a;case"RESET_APP":return localStorage.clear(),a;default:return a}}}}),S="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):g.c,j=Object(g.d)(w,(localStorage.getItem("timeFilter")&&(O.timeFilter=Object(d.fromJS)(JSON.parse(localStorage.getItem("timeFilter")))),localStorage.getItem("dungeonsDump")&&(O.dungeonsDump=JSON.parse(localStorage.getItem("dungeonsDump"))),localStorage.getItem("activeDungeon")&&(O.activeDungeon=localStorage.getItem("activeDungeon")),localStorage.getItem("availableDungeons")&&(O.availableDungeons=JSON.parse(localStorage.getItem("availableDungeons"))),Object(d.Map)(O)),S(x)),T=n(3),A=n(73),_=n(33),y=n(44),N=n(13),F=n(23),C=n(34),I=n.n(C),R=Object(N.a)([function(e,t){return t||e.get("activeDungeon")},function(e){return e.get("dungeonsDump")},function(e){return e.get("timeFilter")}],function(e,t,n){if(null!==e&&null!==t){var a=t[e].forwards,r=n.get("timeFrom").split(":"),u=Object(F.a)(r,1)[0],l=n.get("timeTo").split(":"),o=Object(F.a)(l,1)[0];return a.filter(function(e){var t=e.unixTime,n=I()(t).hours();return Number(u)<=n&&n<=Number(o)})}return[]}),k=Object(N.a)([function(e){return R(e)}],function(e){if(e.length>0){var t={},n=[];e.forEach(function(e,a){n.push({loot:e.loot,item:e.item,caps:e.caps,materials:e.materials,time:e.time,index:a}),null!==e.item&&(t[e.item]?t[e.item].amount+=1:t[e.item]={amount:1,time:e.time,index:a})});var a=Object(y.a)(Object.keys(t).map(function(e){return t[e].amount})).concat([0]).reduce(function(e,t){return e+t});return{items:Object.keys(t).map(function(e){return{name:e,time:t[e].time,amount:t[e].amount,index:t[e].index,percent:(100*t[e].amount/a).toFixed(1)}}).sort(function(e,t){return-(e.percent-t.percent)}),loot:n}}return{items:[],loot:[]}}),P=n(35),V=n(43),H=(n(68),function(e){var t=Object(P.a)({},e);return r.a.createElement(V.a,Object.assign({previousText:"<=",nextText:"=>",loadingText:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c...",pageText:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430",ofText:"\u0438\u0437",rowsText:"\u0437\u0430\u043f\u0438\u0441\u0435\u0439",rowsSelectorText:"\u0437\u0430\u043f\u0438\u0441\u0435\u0439 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435",noDataText:"\u0414\u0430\u043d\u043d\u044b\u0445 \u043d\u0435\u0442",defaultPageSize:5},t))}),U=n(17),L=[{value:"00:00",label:"00:00",weight:0},{value:"01:00",label:"01:00",weight:1},{value:"02:00",label:"02:00",weight:2},{value:"03:00",label:"03:00",weight:3},{value:"04:00",label:"04:00",weight:4},{value:"05:00",label:"05:00",weight:5},{value:"06:00",label:"06:00",weight:6},{value:"07:00",label:"07:00",weight:7},{value:"08:00",label:"08:00",weight:8},{value:"09:00",label:"09:00",weight:9},{value:"10:00",label:"10:00",weight:10},{value:"11:00",label:"11:00",weight:11},{value:"12:00",label:"12:00",weight:12},{value:"13:00",label:"13:00",weight:13},{value:"14:00",label:"14:00",weight:14},{value:"15:00",label:"15:00",weight:15},{value:"16:00",label:"16:00",weight:16},{value:"17:00",label:"17:00",weight:17},{value:"18:00",label:"18:00",weight:18},{value:"19:00",label:"19:00",weight:19},{value:"20:00",label:"20:00",weight:20},{value:"21:00",label:"21:00",weight:21},{value:"22:00",label:"22:00",weight:22},{value:"23:00",label:"23:00",weight:23},{value:"24:00",label:"24:00",weight:24}],M=n(4),G=n(5);function J(){var e=Object(M.a)(["\n    width: 100%;\n    min-height: 40px;\n    font-size: 18px;\n    padding: 0 0 0 20px;\n    border-radius: 3px;\n\n    & > option {\n      padding: 10px 0;\n      &[disabled] {\n        background: #e8e8e8;\n      }\n    }\n"]);return J=function(){return e},e}var z=G.b.select(J()),B=function(e){return function(t){e(t.target.name,t.target.value)}},X=Object(c.b)(function(e){var t,n={timeFrom:(t=e.get("timeFilter")).get("timeFrom"),timeTo:t.get("timeTo")},a=L.find(function(e){return e.value===n.timeTo}).weight,r=L.find(function(e){return e.value===n.timeFrom}).weight,u=L.map(function(e){return e.weight>=a?Object(U.a)({},e,{disabled:!0}):e}),l=L.map(function(e){return e.weight<r?Object(U.a)({},e,{disabled:!0}):e});return Object(U.a)({},n,{timeFromValues:u,timeToValues:l})},function(e){return Object(g.b)({setTimeFilterAction:b},e)})(function(e){var t=e.timeFrom,n=e.timeTo,u=e.setTimeFilterAction,l=e.timeFromValues,o=e.timeToValues;return r.a.createElement(a.Fragment,null,r.a.createElement(T.Row,null,r.a.createElement(T.Col,{xs:6,md:6},"\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f"),r.a.createElement(T.Col,{xs:6,md:6},"\u041a\u043e\u043d\u0435\u0447\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f")),r.a.createElement(T.Row,null,r.a.createElement(T.Col,{xs:6,md:6},r.a.createElement(z,{name:"timeFrom",onChange:B(u),defaultValue:t},l.map(function(e){return r.a.createElement("option",{key:"time-from-item-".concat(e.value),value:e.value,disabled:e.disabled},e.label)}))),r.a.createElement(T.Col,{xs:6,md:6},r.a.createElement(z,{name:"timeTo",onChange:B(u),defaultValue:n},o.map(function(e){return r.a.createElement("option",{key:"time-to-item-".concat(e.value),value:e.value,disabled:e.disabled},e.label)})))))}),W=function(e){var t=e.setActiveDungeonAction,n=e.availableDungeons,a=e.activeDungeon;return r.a.createElement(z,{placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438 \u0434\u0430\u043d\u0436",onChange:function(e){return function(t){e(t.target.value)}}(t),defaultValue:a},n.map(function(e){return r.a.createElement("option",{key:"dungeon-item-".concat(e.value),value:e.value},e.label)}))};W.defaultProps={activeDungeon:null};var q=Object(c.b)(function(e){return{activeDungeon:e.get("activeDungeon"),availableDungeons:e.get("availableDungeons")}},function(e){return Object(g.b)({setActiveDungeonAction:E},e)})(W);function K(){var e=Object(M.a)(["\n    border: 0;\n    width: 100%;\n    padding: 9px 0;\n    background: #ff6e6e;\n    border-radius: 3px;\n    text-transform: uppercase;\n    font-size: 17px;\n    font-family: arial;\n    font-weight: bold;\n    color: white;\n    cursor: pointer;\n    border: 1px solid #ff6e6e;\n"]);return K=function(){return e},e}var Q=G.b.button(K()),Y=Object(c.b)(null,function(e){return Object(g.b)({resetAppAction:v},e)})(function(e){var t=e.resetAppAction;return r.a.createElement(Q,{onClick:t},"\u041e\u0427\u0418\u0421\u0422\u0418\u0422\u042c")});function Z(){var e=Object(M.a)(["\n  height: 10px;\n    width: 10px;\n  "]);return Z=function(){return e},e}function $(){var e=Object(M.a)(["\n  ","\n  @media (max-width: 770px) {\n    height: 10px;\n    width: 10px;\n  }\n"]);return $=function(){return e},e}var ee=G.b.div($(),function(e){return e.desktop?Object(G.a)(Z()):""});function te(){var e=Object(M.a)(["\n  display: flex;\n  justify-content: center;\n"]);return te=function(){return e},e}var ne=G.b.div(te());function ae(){var e=Object(M.a)(["\n  margin-top: 20px;\n"]);return ae=function(){return e},e}var re=G.b.div(ae()),ue=function(e){var t=e.items,n=e.loot,a=e.activeDungeon;return r.a.createElement(re,null,r.a.createElement(T.Grid,{fluid:!0},r.a.createElement(T.Row,null,r.a.createElement(T.Col,{xs:12,md:12},r.a.createElement(X,null))),r.a.createElement(ee,{desktop:!0}),r.a.createElement(T.Row,null,r.a.createElement(T.Col,{xs:12,md:6},"\u041f\u043e\u0434\u0435\u0437\u0435\u043c\u0435\u043b\u044c\u0435"),r.a.createElement(ee,null),r.a.createElement(T.Col,{xs:12,md:6})),r.a.createElement(T.Row,null,r.a.createElement(T.Col,{xs:12,md:6},r.a.createElement(q,null)),r.a.createElement(ee,null),r.a.createElement(T.Col,{xs:12,md:6},r.a.createElement(Y,null))),r.a.createElement(ee,{desktop:!0}),r.a.createElement(T.Row,null,r.a.createElement(T.Col,{xs:12,md:6},r.a.createElement(H,{data:t,columns:[{Header:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442",accessor:"name",minWidth:150},{Header:"\u041a\u043e\u043b-\u0432\u043e",accessor:"amount",minWidth:70},{Header:"\u0428\u0430\u043d\u0441",accessor:"percent",minWidth:70,Cell:function(e){var t=e.value;return"".concat(t,"%")}},{Header:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c",accessor:"name",id:"itemLink",sortable:!1,Cell:function(e){var t=e.value;return r.a.createElement(ne,null,r.a.createElement(A.a,{to:"browse/".concat(a,"/").concat(t)},r.a.createElement(_.a,{icon:"eye"})))}}]})),r.a.createElement(ee,null),r.a.createElement(T.Col,{xs:12,md:6},r.a.createElement(H,{data:n,columns:[{Header:"\u041b\u0443\u0442",accessor:"loot"},{Header:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442",accessor:"item",Cell:function(e){return e.value||"\u041d\u0438\u0447\u0435\u0433\u043e"}},{Header:"\ud83d\udd73",accessor:"caps"},{Header:"\ud83d\udce6",accessor:"materials"},{Header:"\u0412\u0440\u0435\u043c\u044f",accessor:"time"}]})))))};ue.defaultProps={activeDungeon:null};var le=Object(c.b)(function(e){var t=k(e);return{items:t.items,loot:t.loot,activeDungeon:e.get("activeDungeon")}})(ue),oe=Object(N.a)([function(e,t){return R(e,t.dungeon)},function(e,t){return t.item}],function(e,t){return e.length>0?e.filter(function(e){return e.item===t}):[]});function ie(){var e=Object(M.a)(["\n  margin-top: 20px;\n"]);return ie=function(){return e},e}var ce=G.b.div(ie()),me=Object(c.b)(function(e,t){var n=t.match;return{forwards:oe(e,{item:n.params.item,dungeon:n.params.dungeon})}})(function(e){var t=e.forwards;return r.a.createElement(ce,null,r.a.createElement(T.Grid,{fluid:!0},r.a.createElement(T.Row,null,r.a.createElement(T.Col,{md:12},r.a.createElement(H,{data:t,columns:[{Header:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442",accessor:"item",Cell:function(e){return e.value||"\u041d\u0438\u0447\u0435\u0433\u043e"}},{Header:"\u0412\u0440\u0435\u043c\u044f",accessor:"time"},{Header:"\u041b\u0443\u0442",accessor:"loot"},{Header:"\ud83d\udd73",accessor:"caps"},{Header:"\ud83d\udce6",accessor:"materials"}]})))))}),se=n(38),ge=n(39),de=n(46),fe=n(40),ve=n(47),be=n(45),pe=function(e){return Object.keys(e).every(function(t){var n=e[t];return void 0!==n.name&&void 0!==n.distance&&void 0!==n.technicalName&&void 0!==n.forwards&&void 0!==n.forwards.length})};function Ee(){var e=Object(M.a)(["\n  position: absolute;\n  z-index: 1000;\n  bottom: 15px;\n  left: 10px;\n"]);return Ee=function(){return e},e}function De(){var e=Object(M.a)(["\n    text-align: center;\n    margin: 15px 0;\n\n    color: ","\n"]);return De=function(){return e},e}function he(){var e=Object(M.a)(["\n  position: fixed;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 999;\n"]);return he=function(){return e},e}var Oe=G.b.div(he()),we=G.b.span(De(),function(e){return e.error?"#f44336":""}),xe=G.b.div(Ee()),Se=function(e){function t(){var e,n;Object(se.a)(this,t);for(var a=arguments.length,r=new Array(a),u=0;u<a;u++)r[u]=arguments[u];return(n=Object(de.a)(this,(e=Object(fe.a)(t)).call.apply(e,[this].concat(r)))).state={isDumpValid:!0},n.onDrop=function(e){var t=e.setDungeonsDump,a=e.setAvailableDungeons,r=e.setActiveDungeon;return function(e){e.forEach(function(e){var u=new FileReader;u.onload=function(){var e=JSON.parse(u.result);if(pe(e)){var l=Object.keys(e).map(function(t){var n=e[t],a=n.name;return{value:n.technicalName,label:a}});a(l),t(e),r(l[0].value),n.setState(function(){return{isDumpValid:!0}})}else n.setState(function(){return{isDumpValid:!1}})},u.readAsText(e)})}},n}return Object(ve.a)(t,e),Object(ge.a)(t,[{key:"render",value:function(){var e=this.props,t=e.setDungeonsDumpAction,n=e.setAvailableDungeonsAction,a=e.setActiveDungeonAction,u=e.dungeonsDump,l=e.availableDungeons,o=this.state.isDumpValid;return(null===u||0===l.length)&&r.a.createElement(Oe,null,r.a.createElement(be.a,{accept:".json",multiple:!1,onDrop:this.onDrop({setDungeonsDump:t,setAvailableDungeons:n,setActiveDungeon:a}),style:{cursor:"pointer",top:0,width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"white",fontSize:"34px",fontFamily:"arial",flexDirection:"column"},activeStyle:{backgroundColor:"#effff0"}},r.a.createElement(we,null,"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438 \u0434\u0430\u043c\u043f \u0441\u044e\u0434\u0430, \u043b\u0438\u0431\u043e \u043a\u043b\u0438\u043d\u043a\u0438 \u0432 \u043b\u044e\u0431\u043e\u043c \u043c\u0435\u0441\u0442\u0435 \u0447\u0442\u043e \u0431\u044b \u043e\u0442\u043a\u0440\u044b\u0442\u044c \u0444\u0430\u0439\u043b\u043e\u0432\u044b\u0439 \u0434\u0438\u0430\u043b\u043e\u0433"),!o&&r.a.createElement(we,{error:!0},"\u042d\u0442\u043e \u043d\u0435 \u043f\u043e\u0445\u043e\u0436\u0435 \u043d\u0430 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0434\u0430\u043c\u043f")),r.a.createElement(xe,null,r.a.createElement(we,null,"\u0414\u0430\u043c\u043f \u043c\u043e\u0436\u043d\u043e \u0432\u0437\u044f\u0442\u044c \u0443 \u0431\u043e\u0442\u0430 ",r.a.createElement("a",{href:"https://t.me/DungeonMasterRiBot"},"@DungeonMasterRiBot"))))}}]),t}(a.Component);Se.defaultProps={dungeonsDump:null};var je=Object(c.b)(function(e){return{dungeonsDump:e.get("dungeonsDump"),availableDungeons:e.get("availableDungeons")}},function(e){return Object(g.b)({setDungeonsDumpAction:p,setAvailableDungeonsAction:D,setActiveDungeonAction:E},e)})(Se);function Te(){var e=Object(M.a)(["\n  padding: 40px 0 0 0;\n"]);return Te=function(){return e},e}var Ae=G.b.div(Te());function _e(){var e=Object(M.a)(["\n  text-align: center;\n  font-family: monospace;\n  font-size: 24px;\n"]);return _e=function(){return e},e}var ye=G.b.p(_e());l.a.render(r.a.createElement(Ae,null,r.a.createElement(c.a,{store:j},r.a.createElement(o.a,null,r.a.createElement("div",null,r.a.createElement(je,null),r.a.createElement(ye,null,"Dungeon Loot Browser"),r.a.createElement(i.a,{path:"/",exact:!0,component:le}),r.a.createElement(i.a,{path:"/browse/:dungeon/:item",exact:!0,component:me}))))),document.getElementById("root"))}},[[50,2,1]]]);
//# sourceMappingURL=main.557f5f8b.chunk.js.map