(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{50:function(e,t,n){e.exports=n(72)},72:function(e,t,n){"use strict";n.r(t);var a=n(15),r=n(16),l=n(20),u=n(17),o=n(21),i=n(1),c=n.n(i),m=n(18),s=n.n(m),g=n(74),d=n(75),f=n(8),v=n(14),b=n(36);v.b.add(b.a);var p=n(9),E=n(12),D=n(37),h=function(){return{type:"RESET_APP"}},O=function(e,t){return{type:"SET_TIME_FILTER",key:e,value:t}},w=function(e){return{type:"SET_DUNGEONS_DUMP",dump:e}},x=function(e){return{type:"SET_DUNGEON",dungeon:e}},S=function(e){return{type:"SET_AVAILABLE_DUNGEONS",dungeons:e}},j={activeDungeon:null,timeFilter:Object(E.Map)({timeFrom:"00:00",timeTo:"24:00"}),dungeonsDump:null,availableDungeons:[]},T=Object.assign({},j),y=Object(D.combineReducers)({activeDungeon:function(e,t){switch(t.type){case"SET_DUNGEON":return t.dungeon;case"RESET_APP":return j.activeDungeon;default:return e}},timeFilter:function(e,t){var n=t.key,a=t.value;switch(t.type){case"SET_TIME_FILTER":return e.set(n,a);case"RESET_APP":return j.timeFilter;default:return e}},dungeonsDump:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DUNGEONS_DUMP":return t.dump;case"RESET_APP":return j.dungeonsDump;default:return e}},availableDungeons:function(e,t){switch(t.type){case"SET_AVAILABLE_DUNGEONS":return t.dungeons;case"RESET_APP":return j.availableDungeons;default:return e}}}),A=Object(p.a)(function(e){var t=e.getState;return function(e){return function(n){var a=e(n);switch(n.type){case"SET_TIME_FILTER":return localStorage.setItem("timeFilter",JSON.stringify(t().get("timeFilter").toJS())),a;case"SET_DUNGEONS_DUMP":return localStorage.setItem("dungeonsDump",JSON.stringify(t().get("dungeonsDump"))),a;case"SET_DUNGEON":return localStorage.setItem("activeDungeon",t().get("activeDungeon")),a;case"SET_AVAILABLE_DUNGEONS":return localStorage.setItem("availableDungeons",JSON.stringify(t().get("availableDungeons"))),a;case"RESET_APP":return localStorage.clear(),a;default:return a}}}}),_="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):p.c,N=Object(p.d)(y,(localStorage.getItem("timeFilter")&&(T.timeFilter=Object(E.fromJS)(JSON.parse(localStorage.getItem("timeFilter")))),localStorage.getItem("dungeonsDump")&&(T.dungeonsDump=JSON.parse(localStorage.getItem("dungeonsDump"))),localStorage.getItem("activeDungeon")&&(T.activeDungeon=localStorage.getItem("activeDungeon")),localStorage.getItem("availableDungeons")&&(T.availableDungeons=JSON.parse(localStorage.getItem("availableDungeons"))),Object(E.Map)(T)),_(A)),C=n(3),F=n(73),I=n(38),k=n(46),R=n(13),P=n(28),V=n(39),H=n.n(V),U=Object(R.a)([function(e,t){return t||e.get("activeDungeon")},function(e){return e.get("dungeonsDump")},function(e){return e.get("timeFilter")}],function(e,t,n){if(null!==e&&null!==t){var a=t[e].forwards,r=n.get("timeFrom").split(":"),l=Object(P.a)(r,1)[0],u=n.get("timeTo").split(":"),o=Object(P.a)(u,1)[0];return a.filter(function(e){var t=e.unixTime,n=H()(t).hours();return Number(l)<=n&&n<=Number(o)})}return[]}),L=Object(R.a)([function(e){return U(e)}],function(e){if(e.length>0){var t={},n=[];e.forEach(function(e,a){n.push({loot:e.loot,item:e.item,caps:e.caps,materials:e.materials,time:e.time,index:a}),null!==e.item&&(t[e.item]?t[e.item].amount+=1:t[e.item]={amount:1,time:e.time,index:a})});var a=Object(k.a)(Object.keys(t).map(function(e){return t[e].amount})).concat([0]).reduce(function(e,t){return e+t});return{items:Object.keys(t).map(function(e){return{name:e,time:t[e].time,amount:t[e].amount,index:t[e].index,percent:(100*t[e].amount/a).toFixed(1)}}).sort(function(e,t){return-(e.percent-t.percent)}),loot:n}}return{items:[],loot:[]}}),M=n(40),G=n(45),J=(n(68),function(e){var t=Object(M.a)({},e);return c.a.createElement(G.a,Object.assign({previousText:"<=",nextText:"=>",loadingText:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c...",pageText:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430",ofText:"\u0438\u0437",rowsText:"\u0437\u0430\u043f\u0438\u0441\u0435\u0439",rowsSelectorText:"\u0437\u0430\u043f\u0438\u0441\u0435\u0439 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435",noDataText:"\u0414\u0430\u043d\u043d\u044b\u0445 \u043d\u0435\u0442",defaultPageSize:5},t))}),z=n(22),B=[{value:"00:00",label:"00:00",weight:0},{value:"01:00",label:"01:00",weight:1},{value:"02:00",label:"02:00",weight:2},{value:"03:00",label:"03:00",weight:3},{value:"04:00",label:"04:00",weight:4},{value:"05:00",label:"05:00",weight:5},{value:"06:00",label:"06:00",weight:6},{value:"07:00",label:"07:00",weight:7},{value:"08:00",label:"08:00",weight:8},{value:"09:00",label:"09:00",weight:9},{value:"10:00",label:"10:00",weight:10},{value:"11:00",label:"11:00",weight:11},{value:"12:00",label:"12:00",weight:12},{value:"13:00",label:"13:00",weight:13},{value:"14:00",label:"14:00",weight:14},{value:"15:00",label:"15:00",weight:15},{value:"16:00",label:"16:00",weight:16},{value:"17:00",label:"17:00",weight:17},{value:"18:00",label:"18:00",weight:18},{value:"19:00",label:"19:00",weight:19},{value:"20:00",label:"20:00",weight:20},{value:"21:00",label:"21:00",weight:21},{value:"22:00",label:"22:00",weight:22},{value:"23:00",label:"23:00",weight:23},{value:"24:00",label:"24:00",weight:24}],X=n(4),W=n(5);function q(){var e=Object(X.a)(["\n    width: 100%;\n    min-height: 40px;\n    font-size: 18px;\n    padding: 0 0 0 20px;\n    border-radius: 3px;\n\n    & > option {\n      padding: 10px 0;\n      &[disabled] {\n        background: #e8e8e8;\n      }\n    }\n"]);return q=function(){return e},e}var K=W.b.select(q()),Q=function(e){return function(t){e(t.target.name,t.target.value)}},Y=Object(f.b)(function(e){var t,n={timeFrom:(t=e.get("timeFilter")).get("timeFrom"),timeTo:t.get("timeTo")},a=B.find(function(e){return e.value===n.timeTo}).weight,r=B.find(function(e){return e.value===n.timeFrom}).weight,l=B.map(function(e){return e.weight>=a?Object(z.a)({},e,{disabled:!0}):e}),u=B.map(function(e){return e.weight<r?Object(z.a)({},e,{disabled:!0}):e});return Object(z.a)({},n,{timeFromValues:l,timeToValues:u})},function(e){return Object(p.b)({setTimeFilterAction:O},e)})(function(e){var t=e.timeFrom,n=e.timeTo,a=e.setTimeFilterAction,r=e.timeFromValues,l=e.timeToValues;return c.a.createElement(i.Fragment,null,c.a.createElement(C.Row,null,c.a.createElement(C.Col,{xs:6,md:6},"\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f"),c.a.createElement(C.Col,{xs:6,md:6},"\u041a\u043e\u043d\u0435\u0447\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f")),c.a.createElement(C.Row,null,c.a.createElement(C.Col,{xs:6,md:6},c.a.createElement(K,{name:"timeFrom",onChange:Q(a),defaultValue:t},r.map(function(e){return c.a.createElement("option",{key:"time-from-item-".concat(e.value),value:e.value,disabled:e.disabled},e.label)}))),c.a.createElement(C.Col,{xs:6,md:6},c.a.createElement(K,{name:"timeTo",onChange:Q(a),defaultValue:n},l.map(function(e){return c.a.createElement("option",{key:"time-to-item-".concat(e.value),value:e.value,disabled:e.disabled},e.label)})))))}),Z=function(e){var t=e.setActiveDungeonAction,n=e.availableDungeons,a=e.activeDungeon;return c.a.createElement(K,{placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438 \u0434\u0430\u043d\u0436",onChange:function(e){return function(t){e(t.target.value)}}(t),defaultValue:a},n.map(function(e){return c.a.createElement("option",{key:"dungeon-item-".concat(e.value),value:e.value},e.label)}))};Z.defaultProps={activeDungeon:null};var $=Object(f.b)(function(e){return{activeDungeon:e.get("activeDungeon"),availableDungeons:e.get("availableDungeons")}},function(e){return Object(p.b)({setActiveDungeonAction:x},e)})(Z);function ee(){var e=Object(X.a)(["\n    border: 0;\n    width: 100%;\n    padding: 9px 0;\n    background: #ff6e6e;\n    border-radius: 3px;\n    text-transform: uppercase;\n    font-size: 17px;\n    font-family: arial;\n    font-weight: bold;\n    color: white;\n    cursor: pointer;\n    border: 1px solid #ff6e6e;\n"]);return ee=function(){return e},e}var te=W.b.button(ee()),ne=Object(f.b)(null,function(e){return Object(p.b)({resetAppAction:h},e)})(function(e){var t=e.resetAppAction;return c.a.createElement(te,{onClick:t},"\u041e\u0427\u0418\u0421\u0422\u0418\u0422\u042c")});function ae(){var e=Object(X.a)(["\n  height: 10px;\n    width: 10px;\n  "]);return ae=function(){return e},e}function re(){var e=Object(X.a)(["\n  ","\n  @media (max-width: 770px) {\n    height: 10px;\n    width: 10px;\n  }\n"]);return re=function(){return e},e}var le=W.b.div(re(),function(e){return e.desktop?Object(W.a)(ae()):""});function ue(){var e=Object(X.a)(["\n  display: flex;\n  justify-content: center;\n"]);return ue=function(){return e},e}var oe=W.b.div(ue());function ie(){var e=Object(X.a)(["\n  margin-top: 20px;\n"]);return ie=function(){return e},e}var ce=W.b.div(ie()),me=function(e){var t=e.items,n=e.loot,a=e.activeDungeon;return c.a.createElement(ce,null,c.a.createElement(C.Grid,{fluid:!0},c.a.createElement(C.Row,null,c.a.createElement(C.Col,{xs:12,md:12},c.a.createElement(Y,null))),c.a.createElement(le,{desktop:!0}),c.a.createElement(C.Row,null,c.a.createElement(C.Col,{xs:12,md:6},"\u041f\u043e\u0434\u0435\u0437\u0435\u043c\u0435\u043b\u044c\u0435"),c.a.createElement(le,null),c.a.createElement(C.Col,{xs:12,md:6})),c.a.createElement(C.Row,null,c.a.createElement(C.Col,{xs:12,md:6},c.a.createElement($,null)),c.a.createElement(le,null),c.a.createElement(C.Col,{xs:12,md:6},c.a.createElement(ne,null))),c.a.createElement(le,{desktop:!0}),c.a.createElement(C.Row,null,c.a.createElement(C.Col,{xs:12,md:6},c.a.createElement(J,{data:t,columns:[{Header:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442",accessor:"name",minWidth:150},{Header:"\u041a\u043e\u043b-\u0432\u043e",accessor:"amount",minWidth:70},{Header:"\u0428\u0430\u043d\u0441",accessor:"percent",minWidth:70,Cell:function(e){var t=e.value;return"".concat(t,"%")}},{Header:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c",accessor:"name",id:"itemLink",sortable:!1,Cell:function(e){var t=e.value;return c.a.createElement(oe,null,c.a.createElement(F.a,{to:"browse/".concat(a,"/").concat(t)},c.a.createElement(I.a,{icon:"eye"})))}}]})),c.a.createElement(le,null),c.a.createElement(C.Col,{xs:12,md:6},c.a.createElement(J,{data:n,columns:[{Header:"\u041b\u0443\u0442",accessor:"loot"},{Header:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442",accessor:"item",Cell:function(e){return e.value||"\u041d\u0438\u0447\u0435\u0433\u043e"}},{Header:"\ud83d\udd73",accessor:"caps"},{Header:"\ud83d\udce6",accessor:"materials"},{Header:"\u0412\u0440\u0435\u043c\u044f",accessor:"time"}]})))))};me.defaultProps={activeDungeon:null};var se=Object(f.b)(function(e){var t=L(e);return{items:t.items,loot:t.loot,activeDungeon:e.get("activeDungeon")}})(me),ge=Object(R.a)([function(e,t){return U(e,t.dungeon)},function(e,t){return t.item}],function(e,t){return e.length>0?e.filter(function(e){return e.item===t}):[]});function de(){var e=Object(X.a)(["\n  margin-top: 20px;\n"]);return de=function(){return e},e}var fe=W.b.div(de()),ve=Object(f.b)(function(e,t){var n=t.match;return{forwards:ge(e,{item:n.params.item,dungeon:n.params.dungeon})}})(function(e){var t=e.forwards;return c.a.createElement(fe,null,c.a.createElement(C.Grid,{fluid:!0},c.a.createElement(C.Row,null,c.a.createElement(C.Col,{md:12},c.a.createElement(J,{data:t,columns:[{Header:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442",accessor:"item",Cell:function(e){return e.value||"\u041d\u0438\u0447\u0435\u0433\u043e"}},{Header:"\u0412\u0440\u0435\u043c\u044f",accessor:"time"},{Header:"\u041b\u0443\u0442",accessor:"loot"},{Header:"\ud83d\udd73",accessor:"caps"},{Header:"\ud83d\udce6",accessor:"materials"}]})))))}),be=n(47),pe=function(e){return Object.keys(e).every(function(t){var n=e[t];return void 0!==n.name&&void 0!==n.distance&&void 0!==n.technicalName&&void 0!==n.forwards&&void 0!==n.forwards.length})};function Ee(){var e=Object(X.a)(["\n  position: absolute;\n  z-index: 1000;\n  bottom: 15px;\n  left: 10px;\n"]);return Ee=function(){return e},e}function De(){var e=Object(X.a)(["\n    text-align: center;\n    margin: 15px 0;\n\n    color: ","\n"]);return De=function(){return e},e}function he(){var e=Object(X.a)(["\n  position: fixed;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 999;\n"]);return he=function(){return e},e}var Oe=W.b.div(he()),we=W.b.span(De(),function(e){return e.error?"#f44336":""}),xe=W.b.div(Ee()),Se=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={isDumpValid:!0},n.onDrop=function(e){var t=e.setDungeonsDump,a=e.setAvailableDungeons,r=e.setActiveDungeon;return function(e){e.forEach(function(e){var l=new FileReader;l.onload=function(){var e=JSON.parse(l.result);if(pe(e)){var u=Object.keys(e).map(function(t){var n=e[t],a=n.name;return{value:n.technicalName,label:a}});a(u),t(e),r(u[0].value),n.setState(function(){return{isDumpValid:!0}})}else n.setState(function(){return{isDumpValid:!1}})},l.readAsText(e)})}},n}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.setDungeonsDumpAction,n=e.setAvailableDungeonsAction,a=e.setActiveDungeonAction,r=e.dungeonsDump,l=e.availableDungeons,u=this.state.isDumpValid;return(null===r||0===l.length)&&c.a.createElement(Oe,null,c.a.createElement(be.a,{accept:".json",multiple:!1,onDrop:this.onDrop({setDungeonsDump:t,setAvailableDungeons:n,setActiveDungeon:a}),style:{cursor:"pointer",top:0,width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"white",fontSize:"34px",fontFamily:"arial",flexDirection:"column"},activeStyle:{backgroundColor:"#effff0"}},c.a.createElement(we,null,"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438 \u0434\u0430\u043c\u043f \u0441\u044e\u0434\u0430, \u043b\u0438\u0431\u043e \u043a\u043b\u0438\u043d\u043a\u0438 \u0432 \u043b\u044e\u0431\u043e\u043c \u043c\u0435\u0441\u0442\u0435 \u0447\u0442\u043e \u0431\u044b \u043e\u0442\u043a\u0440\u044b\u0442\u044c \u0444\u0430\u0439\u043b\u043e\u0432\u044b\u0439 \u0434\u0438\u0430\u043b\u043e\u0433"),!u&&c.a.createElement(we,{error:!0},"\u042d\u0442\u043e \u043d\u0435 \u043f\u043e\u0445\u043e\u0436\u0435 \u043d\u0430 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0434\u0430\u043c\u043f")),c.a.createElement(xe,null,c.a.createElement(we,null,"\u0414\u0430\u043c\u043f \u043c\u043e\u0436\u043d\u043e \u0432\u0437\u044f\u0442\u044c \u0443 \u0431\u043e\u0442\u0430 ",c.a.createElement("a",{href:"https://t.me/DungeonMasterRiBot"},"@DungeonMasterRiBot"))))}}]),t}(i.Component);Se.defaultProps={dungeonsDump:null};var je=Object(f.b)(function(e){return{dungeonsDump:e.get("dungeonsDump"),availableDungeons:e.get("availableDungeons")}},function(e){return Object(p.b)({setDungeonsDumpAction:w,setAvailableDungeonsAction:S,setActiveDungeonAction:x},e)})(Se);function Te(){var e=Object(X.a)(["\n  padding: 40px 0 0 0;\n"]);return Te=function(){return e},e}var ye=W.b.div(Te());function Ae(){var e=Object(X.a)(["\n  text-align: center;\n  font-family: monospace;\n  font-size: 24px;\n"]);return Ae=function(){return e},e}var _e=W.b.p(Ae()),Ne=function(e){function t(){return Object(a.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(r.a)(t,[{key:"componentDidCatch",value:function(){localStorage.clear(),window.location.reload()}},{key:"render",value:function(){return c.a.createElement(ye,null,c.a.createElement(f.a,{store:N},c.a.createElement(g.a,null,c.a.createElement("div",null,c.a.createElement(je,null),c.a.createElement(_e,null,"Dungeon Loot Browser"),c.a.createElement(d.a,{path:"/",exact:!0,component:se}),c.a.createElement(d.a,{path:"/browse/:dungeon/:item",exact:!0,component:ve})))))}}]),t}(i.Component);s.a.render(c.a.createElement(Ne,null),document.getElementById("root"))}},[[50,2,1]]]);
//# sourceMappingURL=main.7dd0b5e3.chunk.js.map